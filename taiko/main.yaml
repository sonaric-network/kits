namespace: taiko

common:
  metadata:
    name: Taiko
    shortname: Taiko
    description: >-
      Taiko is a decentralized Ethereum-equivalent ZK-EVM and general-purpose
      ZK-Rollup. Its purpose is to allow developers and users of dApps developed
      for Ethereum L1 to be used on Taiko without any changes. As a result,
      dApps can be easily deployed to L2, inheriting Ethereum's security while
      incurring lower transaction fees than on L1.
    network: taiko
    publisher: Sonaric
    website: 'https://taiko.xyz/'
    source: 'https://github.com/taikoxyz/taiko-mono'
    currency: TAIKO
    icon: 'https://plotter.blob.core.windows.net/icons/60x60.taiko1681992089391.png'
    tags: >-
      blockchain, rollup, bridge, developer tools, community, open source,
      security

mainnet:
  defines: runnable
  inherits: taiko/common
  metadata:
    name: Taiko Mainnet Node
    shortname: mainnet
    description: >-
      A Taiko mainnet node for participating in the decentralized
      Ethereum-equivalent ZK-EVM and general-purpose ZK-Rollup.
    network: mainnet
  requirements:
    CPU: '4'
    RAM: 8192
    GPU: false
    disk: 100
  containers:
    node:
      image: 'taiko/taiko-mainnet:latest'
      paths:
        - '<- `${monk-volume-path}/taiko-data:/var/lib/taiko`'
  files:
    init:
      container: node
      path: /sonaric-init.sh
      mode: '0755'
      contents: >-
        #!/bin/bash

        # Initialize Taiko node

        cp .env.sample .env

        # Set L1 node endpoint

        sed -i 's|L1_NODE_ENDPOINT=.*|L1_NODE_ENDPOINT=http://l1-node:8545|'
        .env

        # Start the node

        docker compose up -d
  services:
    rpc:
      container: node
      port: 8545
      host-port: 8545
      protocol: tcp
      publish: true
    p2p:
      container: node
      port: 30303
      host-port: 30303
      protocol: tcp
      publish: true
  variables:
    l1-node-endpoint:
      description: The endpoint for the L1 node
      type: string
      env: L1_NODE_ENDPOINT
      default: 'http://l1-node:8545'

